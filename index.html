<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Yvonne, Happy Birthday!</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<script type="text/javascript" src="js/jquery.js"></script>
	<link rel="stylesheet" href="css/typing.css">
	<link rel="stylesheet" href="css/main.css">
	<link rel="stylesheet" href="css/button.css">
	<link href="css/album.css" type="text/css" rel="stylesheet">
	<link rel="stylesheet" href="css/cake.css">
	<link rel="stylesheet" href="css/photo.css">
	<script type="text/javascript" src="js/typing.js"></script>
	<script type="text/javascript" src="js/dots.js"></script>
	<script type="text/javascript" src="js/date.js"></script>
	<script type="text/javascript" src="js/hearts.js"></script>
	<script type="text/javascript" src="js/mouse_click_effect.js"></script>
	<script type="text/javascript" src="js/heart_button.js"></script>
	<script type="text/javascript" src='js/TweenMax.min.js'></script>
	<link href="https://fonts.googleapis.com/css?family=Noto+Sans+SC" rel="stylesheet">
	
	<script src="http://www.jq22.com/jquery/jquery-1.10.2.js"></script>
	<script src="js/Carousel.js"></script>
</head>

<body onclick="play_music()">
<div id="part1">
	<span class="comments">尾</span>
	<br />
	<span class="comments">还记得6年前你的生日么？</span>
	<br />
	<div class="comments picture">
		<img alt="140x140" src="resource/birthday.png" style="width: 48%; height: 30%;">
	</div>
</div>

<div id="part2">
	<span class="comments">很开心 6年以后 你真的打开了它</span>
	<br />
	<span class="comments">希望你看到的 是你所期待的美好</span>
	<br />
	<span class="comments">我知道 我身上还有很多毛病 经常惹你不开心</span>
	<br />
	<span class="comments">谢谢你的包容和理解 我很感动也很珍惜</span>
	<br />
	<span class="comments">我会努力去成长 去变得更好</span>
	<br />
	<span class="comments">跟你在一起的每一天 我都很幸福</span>
	<br />
	<span class="comments">也是第一次</span>
	<br />
	<span class="comments">觉得 结婚 一辈子 这些词汇</span>
	<br />
	<span class="comments">真的都不再遥远</span>
	<br />
	<span class="comments">以后的每一天</span>
	<br />
	<span class="comments">都会有我陪着你</span>
	<br />
	<span class="comments">...</span>
	<br />
</div>


<div class="cs">
    <img src="resource/p1.jpg" id="logo" class="p1">
	<img src="resource/p2.jpg" id="logo" class="p2">
	<img src="resource/p3.jpg" id="logo" class="p3">
	<img src="resource/p4.jpg" id="logo" class="p4">
	<img src="resource/p5.jpg" id="logo" class="p5">
	<img src="resource/p6.jpg" id="logo" class="p6">
	<img src="resource/p7.jpg" id="logo" class="p7">
	<img src="resource/p8.jpg" id="logo" class="p8">
	<img src="resource/p9.jpg" id="logo" class="p9">
</div>

<div id="mainDiv">
	<div id="content">
		<div id="output-wrap">
			<span id="output"></span>
			<span class="typing-cursor-white">|</span>
		</div>
	</div>
</div>
<canvas id="canvas" class="canvas">
</canvas>
<div id="birthdaycake">
	<div class="pyro">
		<div class="before"></div>
	</div>

	<h2>Happy Birthday Yvonne!</h2>
	<span id="icon">🎉</span>
	<div class="candle">
	<div id="flame" class="lit"></div>
	</div>

	<div class="cake"></div>
	<div class="plate"></div>
</div>
<div class="poster-main" id="album">
		<div class="poster-btn poster-prev-btn"></div>
		<ul class="poster-list">
			<li class="poster-item"><a href="#"><img src="resource/1.jpg"></a>
				<span class="poster-item-title">广州 2018.10.28</span>
			</li>
			<li class="poster-item"><a href="#"><img src="resource/2.jpg"></a>
				<span class="poster-item-title">京都 2018.10.02</span>
			</li>
			<li class="poster-item"><a href="#"><img src="resource/3.jpg"></a>	
				<span class="poster-item-title">京都 2018.10.01</span>		
			</li>
			<li class="poster-item"><a href="#"><img src="resource/4.jpg"></a>
				<span class="poster-item-title">东莞 2018.10.19</span>			
			</li>
			<li class="poster-item"><a href="#"><img src="resource/5.jpg"></a>
				<span class="poster-item-title">广州 2018.10.20</span>			
			</li>
			<li class="poster-item"><a href="#"><img src="resource/6.jpg"></a>
				<span class="poster-item-title">京都 2018.10.02</span>
			</li>
			<li class="poster-item"><a href="#"><img src="resource/7.jpg"></a>
				<span class="poster-item-title">京都 2018.10.03</span>
			</li>
			<li class="poster-item"><a href="#"><img src="resource/8.jpg"></a>
				<span class="poster-item-title">京都 2018.10.03</span>			
			</li>
			<li class="poster-item"><a href="#"><img src="resource/9.jpg"></a>
				<span class="poster-item-title">大阪 2018.10.05</span>			
			</li>
			<li class="poster-item"><a href="#"><img src="resource/10.jpg"></a>	
				<span class="poster-item-title">深圳 2018.10.22</span>		
			</li>
			<li class="poster-item"><a href="#"><img src="resource/11.jpg"></a>
				<span class="poster-item-title">深圳 2018.10.27</span>			
			</li>
		</ul>
		<div class="poster-btn poster-next-btn"></div>
</div>
<canvas id="pinkboard" class="canvas"></canvas>
<div id='hearContainer'>
  <div id='shadow'></div>
  <img id='bigHeart' src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/183204/heart_(1).png" alt="heart" height="90%" width="90%">
</div>
<p class="together_calender" id="together_calender" style="color: white;">
    We fell in love
    <br/>
    <span id="span_dt_dt"></span>
</p>
<audio class="music" id="bgm" src="resource/bgm2.mp3" loop="loop" controls="controls" style="display:none">
当前浏览器不支持音乐播放
</audio>
<audio class="music" id="birthday_song" src="resource/happy_birthday_song.mp3" loop="loop" controls="controls" style="display:none">
当前浏览器不支持音乐播放
</audio>
<script language="javascript">
	var container = document.getElementById('hearContainer') , 
    bigHeart = document.getElementById('bigHeart') ,
    shadow = document.getElementById('shadow') ,
    heartSrc = bigHeart.getAttribute('src') ,
    A = document.createElement('audio'),
	count=0;
A.src = 'http://www.freesound.org/data/previews/265/265296_5003039-lq.mp3';  A.volume=0.7;
container.addEventListener('click',clickHandler);
function clickHandler(){
	count=count+1;
	if(count==7) {
		generateHeart();
		document.getElementById("together_calender").style.display="inline";
		document.getElementById("mainDiv").style.display="inline";
		document.getElementById("pinkboard").style.display="none";
		document.getElementById("hearContainer").style.display="none";
		// document.getElementById("album").style.display="none";
		$('#album').remove();
		$('#birthdaycake').remove();
		initMouseClickEffect();
		//document.getElementById("birthday_song").pause();
		//document.getElementById("bgm").play();
	    show_date_time();
		var typing = new Typing({
			source: document.getElementById('part1'),
			output: document.getElementById('output'),
			delay: 300,
			done: function() {
				console.log(this);
				console.log('done');
				window.setTimeout(S.Next, 10000);
			}
		});
		typing.start();
	} else {
		generateHeart();
	}
}

function generateHeart(){
  A.currentTime=0.09; 
  A.play();
  TweenMax.fromTo([bigHeart,shadow],.15,{scale:1},{scale:.88,repeat:1,yoyo:true,ease:Back.easeIn.config(7)})
  var 
  newH = document.createElement('img') ,
  newC = document.createElement('div') ,
  WH = R(80,15) , newDs = [] ;
  for(var nd,i=2; i--;){ 
    nd = document.createElement('div'); nd.className='dots'; 
    newDs.push(nd); container.insertBefore(nd,bigHeart);
  };
  newH.src = heartSrc; 
  newH.className='hearts'; 
  newC.className='circ';
  TweenLite.set(newH,{width:WH,height:WH})
  container.insertBefore(newH,bigHeart); container.appendChild(newC);
  heartAnim(newH,newC,newDs);
};
function heartAnim(e1,e2,e34){
  var dur = R(3.5,1.5) , Path = [] , Y = R(-250,-380) , xStep = ~~R(6,3) ;
  for(var i=1; i<xStep; i++){ Path.push({x:R(32,-96) , y:i*(Y/xStep)}) };
  TweenLite.to(e1,dur,{scale:.3,
    bezier:{ curviness:1.5,values:Path,autoRotate:90 },
    onComplete:function(){ container.removeChild(e1); container.removeChild(e2); }
  });
  TweenLite.to(e1,dur-0.2,{force3D:true,opacity:1,ease:SlowMo.ease.config(0.1,0.8,true)});
  TweenLite.fromTo(e2,.6,{force3D:true,scale:.3},{scale:1,opacity:0});
  TweenMax.staggerTo(e34,R(3.5,1.5),{force3D:true,opacity:0,scale:0,
    cycle:{
      bezier:function(){
        var nPath = [];
        for(var i=1; i<xStep; i++){ nPath.push({x:R(32,-96) , y:i*(Y/xStep)}) };
        return {curviness:1.5,values:nPath}
      }
    }
  },R(0.5,0),function(){for(var i=2;i--;){container.removeChild(e34[i]);}});  
};
function R(M,m) { return m+(M-m)*Math.random(); };

	S.init();
	
$(".poster-main").Carousel({
	"width":$(window).width()*0.8,		
	"height":$(window).height()*0.4,		
	"posterWidth":$(window).width()*0.21,	
	"posterHeight":$(window).width()*0.28,
	"scale":0.9,		
	"speed": 500,	
	"autoPlay":true,	
	"delay": 3000,	
	"verticalAlign":"middle"	
});

function play_music() {
	document.getElementById("birthday_song").play();
}
</script>
</div>
</body>
</html>
